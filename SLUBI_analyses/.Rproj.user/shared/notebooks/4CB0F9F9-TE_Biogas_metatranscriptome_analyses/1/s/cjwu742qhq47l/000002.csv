"0","# Create data needed throughout the analysis"
"0","## Since salmon provides transcript-level estimates only, we need a two-column data frame linking transcript id (column 1) to gene id (column 2)."
"0","quant.files <- Sys.glob(""Metatranscriptome/salmon/*/quant.sf"")"
"0","tx2gene <-  quant.files %>%"
"0","            map(read_tsv) %>%    # read in all the files individually, using"
"0","                                 # the function read_csv() from the readr package"
"0","            reduce(rbind) %>%    # reduce with rbind into one dataframe"
"0","            transmute(transcript.id=Name,"
"0","                      gene.id=Name)"
"0",""
"0","## Read counts into tximport"
"0","files <- file.path(""Metatranscriptome/salmon"", metadata$Sample, ""quant.sf"")"
"0","names(files) <- paste0(""sample"", 1:6)"
"0","#all(file.exists(files))"
"0","se <- tximport(files, type = ""salmon"", tx2gene = tx2gene)"
"0",""
"0","## Create DESeq2 object"
"0","dds <- DESeqDataSetFromTximport(txi = se, colData = metadata, design = ~ Condition)"
